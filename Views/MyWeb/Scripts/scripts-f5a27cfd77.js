function CreateJobApplicationForm(){$(document).ready(function(){var t=$("#job-application"),e=t.find("form"),a=(e.find("input"),GetInputFieldArray());jQuery.each(a,function(t,e){var a=$(e.type+"[id$='"+e.id+"']");a.removeClass(),a.removeAttr("style"),"checkbox"===e.subtype?(a.wrap($('<label class="contact-lbl">',{"for":a.id}).text(e.title)),a.addClass("contact-chk")):"submit"===e.subtype?a.addClass("btn_base"):"file"===e.subtype||(a.attr("placeholder",e.title),a.addClass("form-control floating-label"),a.wrap("<div class='form-group "+e.cssclass+"'></div>"))});var i=$("span[id$='lblJobTitle1']"),l=$("#jobs-header");void 0!=i&&void 0!=l&&l.text(i.text()),CleanText(),RemoveFields(),$("fieldset").remove(),$("section[id$='job-application']").find("p").remove(),$("br").remove(),$("td").removeAttr("style"),$("table").removeAttr("style"),$("div[id$='divPIII']").find("table").find("tr:first").remove(),$.material.init()})}function GetInputFieldArray(){var t={},e=0;t[e++]={id:"txtFirstName",title:"First name",type:"input",cssclass:""},t[e++]={id:"txtLastName",title:"Last name",type:"input"},t[e++]={id:"txtAddress",title:"Address",type:"input",cssclass:""},t[e++]={id:"txtCity",title:"City",type:"input"},t[e++]={id:"txtZip",title:"Zip code",type:"input",cssclass:""},t[e++]={id:"CountryList",title:"Country",type:"select",cssclass:""},t[e++]={id:"txtPhone",title:"Telephone",type:"input",cssclass:""},t[e++]={id:"txtMobile",title:"Mobile",type:"input",cssclass:""},t[e++]={id:"txtEmail",title:"Email",type:"input",cssclass:""},t[e++]={id:"ReferralList",title:"Where did you hear about CCP?",type:"select",cssclass:""},t[e++]={id:"txtYearBorn",title:"Year born",type:"input",cssclass:""},t[e++]={id:"txtStartDate",title:"Preferred start date",type:"input",cssclass:""},t[e++]={id:"txtSalary",title:"Approximate salary range (USD $)",type:"input",cssclass:""},t[e++]={id:"txtOtherInfo",title:"Other information",type:"textarea",cssclass:""},t[e++]={id:"CV",title:"Attach CV (.doc .docx .pdf .txt) - Max file size 4 MB",type:"input",subtype:"file",cssclass:""},t[e++]={id:"txtRecruitersCode",title:"Recruiters Code (Note: This field is only for Recruiters accepted by CCP)",type:"input",cssclass:""};for(var a=1;5>a;a++)t[e++]={id:"txtEmployer"+a,title:"Employer",type:"input",cssclass:"first"},t[e++]={id:"txtEmployer"+a+"Start",title:"Start date",type:"input",cssclass:""},t[e++]={id:"txtEmployer"+a+"Finish",title:"Finish date",type:"input",cssclass:""},t[e++]={id:"txtSchool"+a,title:"Education",type:"input",cssclass:"first"},t[e++]={id:"txtSchool"+a+"Start",title:"Start date",type:"input",cssclass:""},t[e++]={id:"txtSchool"+a+"Finish",title:"Finish date",type:"input",cssclass:""},t[e++]={id:"txtSchoolDegree"+a,title:"Degree",type:"input",cssclass:""},t[e++]={id:"txtCommentName"+a,title:"Name",type:"input",cssclass:"first"},t[e++]={id:"txtCommentTitle"+a,title:"Title",type:"input",cssclass:""},t[e++]={id:"txtCommentCompany"+a,title:"Company",type:"input",cssclass:""},t[e++]={id:"txtCommentPhone"+a,title:"Phone / Email",type:"input",cssclass:""},t[e++]={id:"cbxCommentContactOk"+a,title:"Ok to contact",type:"input",subtype:"checkbox",cssclass:""};return t[e++]={id:"SaveButton",title:"Send",type:"input",subtype:"submit",cssclass:"btn_base"},t}function CleanText(){var t=["First name:","Last name:","Address:","City:","Zip code:","Country:","Telephone:","Mobile:","Email:","Where did you hear about CCP?:","Year born","Preferred start date:","Approximate salary range (USD $):","Other information:","Recruiters Code (Note: This field is only for Recruiters accepted by CCP):"],e=$(".ApplicationForm");if(void 0!=e){var a=e.html();if(void 0!=a){for(var i=0;i<t.length;i++)a=a.replace(t[i],"");a=a.replace("Gender (optional):","<div class='title'>Gender</div>"),a=a.replace("Recent employment (Latest first):","<div class='title'>Recent employment (Latest first):</div>"),a=a.replace("Education (Latest first):","<div class='title'>Education (Latest first):</div>"),a=a.replace("References:","<div class='title'>References:</div>"),a=a.replace("Attach CV","Attach CV in English")}e.html(a)}}function RemoveFields(){var t=["lblFNameRemind","FirstNameValidator","lblLNameReminder","LastNameValidator","lblEmailReminder","EmailValidator","EmailFormatValidator","lblReferral","ReferralValidator"],e=$(".ApplicationForm");if(void 0!=e)for(var a=0;a<t.length;a++){var i=$("[id$='"+t[a]+"']");i.remove()}}function CreateJobDetails(){var t=$("input[id$='ApplyButton']");if(void 0!=t){t.addClass("btn_base");var e=$("a[id$='ApplyButtonTop']");if(void 0!=e){var a=t.attr("onclick");e.attr("onclick",a),t.parent().append("<a class='btn_blue_transparent btn_base job-button-bottom' onclick=\""+a+'">Apply for this position</a>'),t.remove()}}var i=$("span[id$='JobTitle']"),l=$("#jobs-header");void 0!=i&&void 0!=l&&(l.text(i.text()),document.title=i.text(),$("meta[name=title]").attr("content",i.text()))}function CreateJobListing(){$(document).ready(function(){var t={},e=0,a=$(".joblist > tbody > tr");$(a).each(function(){t[e++]={title:$(this.cells[0]).find("a").text(),url:$(this.cells[0]).find("a").attr("href"),location:this.cells[1].innerHTML,category:this.cells[2].innerHTML}}),$("#Textpage").removeClass(),$("#text").children("strong:first-of-type").remove(),$("#text").children("form").children("table:first-of-type").remove();var i=$(".joblist"),l=i.parent();l.addClass("container container-jobs"),l.append("<div class='row'>"),jQuery.each(t,function(t,e){var a=GetLocationClass(e.location);$(l).append("<a href='"+e.url+"'><div class='col-sm-4 col-xs-12 job-item-container'><div class='job-item "+a+"'><div class='job-item-layer'><div class='job-item-inner'><h3>"+e.title+"</h3><p>"+e.location+" Â· "+e.category+"</p></div></div></div></div></a>")}),l.append("</div>"),i.remove()})}function GetLocationClass(t){var e="job-image-";return"Atlanta, GA, USA"===t?e+"atlanta":"Reykjavik, Iceland"===t?e+"reykjavik":"Shanghai, China"===t?e+"shanghai":"Newcastle, UK"===t?e+"newcastle":e+"location"}function JobsPageSetup(){$(document).ready(function(){void 0!=$("#job-listing").html()?CreateJobListing():void 0!=$("#job-details").html()?CreateJobDetails():void 0!=$("#job-application").html()&&CreateJobApplicationForm();var t=$("#jobs-overlay");void 0!=t&&t.fadeOut(800)})}function InjectHeroScripts(){$(document).ready(function(){var t=$("#header_hero").height(),e=t/2+200;if(null!=t){$(window).scroll(function(){var a=$(window).scrollTop();a>t-e?$(".navbar").hasClass("navbar-color")||$(".navbar").removeClass("navbar-transparent").addClass("navbar-color"):$(".navbar").hasClass("navbar-transparent")||$(".navbar").removeClass("navbar-color").addClass("navbar-transparent")});var a=$("#header_hero").next("section").attr("id");console.log("Next Section ID"+a),$(".mouse-scroll").attr("href","#"+a)}var i=$("html, body");$(".mouse-scroll").click(function(){return console.log("Mouse scroll clicked"),i.animate({scrollTop:$($(this).attr("href")).offset().top-79},1e3),!1})})}function InjectHeaderCaptionScripts(){$(document).ready(function(){$(window).scroll(function(){var t=$("#header").height(),e="hdfade";null==t&&(t=$("#header_hero").height(),e="overlay hdfade");var a=$(window).scrollTop(),i=t-a;if(i>0){var l=$(".hdfade"),n=100;if(0===a)l.removeClass(),l.addClass(e).addClass("hdfade-"+n);else{var o=300,s=t/2+400;if(s>=i){var r=s-i,c=100-r/o*100;n=0>=c?0:20>=c?20:40>=c?40:60>=c?60:80>=c?80:100,l.removeClass(),l.addClass(e).addClass("hdfade-"+n)}}}var d=$(".twitter-container");null!=d&&(0===a?d.hasClass("fadeIn")||d.removeClass("fadeOut").addClass("fadeIn"):d.hasClass("fadeOut")||d.removeClass("fadeIn").addClass("fadeOut"))})})}function InjectMagnificPopup(){$(".zoom-gallery").magnificPopup({delegate:"a",type:"image",closeOnContentClick:!1,closeBtnInside:!1,mainClass:"mfp-with-zoom mfp-img-mobile",image:{verticalFit:!0,titleSrc:function(t){return t.el.attr("title")}},gallery:{enabled:!0},zoom:{enabled:!0,duration:300,opener:function(t){return t.find("img")}}})}function playVideo(t){var e=$("#"+t)[0];void 0!=e&&(e.pause(),e.currentTime=0,e.play())}function pauseVideo(t){var e=$("#"+t)[0];void 0!=e&&e.pause()}function onYouTubeIframeAPIReady(){bindYtBtn()}function getDevice(){var t=viewport().width;return t>=970?"desktop":"mobile"}function viewport(){var t=window,e="inner";return"innerWidth"in window||(e="client",t=document.documentElement||document.body),{width:t[e+"Width"],height:t[e+"Height"]}}function bindOverlayClose(){$(".overlay .bg").on("click",function(){var t=$(".overlay");$("iframe",t).length>0?t.removeClass("open").data("player").pauseVideo():($("img",t).removeClass("initial").removeClass("animate"),t.removeClass("open"))})}function bindEmailSubmit(){var t=$("#mailForm");$("#mailForm input.input-lg");$("#mailForm").data("working",!1),t.on("submit",function(e){if(!$("#mailForm").data("working")){$("input",t).blur();var a=$("input",t).val();validateEmail(a)?sendMail(a):alertEmailMalformed()}return e.preventDefault(),!1})}function alertEmailSuccess(){$(".signup").addClass("success")}function alertEmailMalformed(){$(".signup").addClass("error")}function alertNetworkProblem(){$(".signup").addClass("networkProblem")}function sendMail(t){$("#mailForm").data("working",!0),$.ajax({url:"//api.ccpgames.com/v1/interest",type:"POST",contentType:"application/json",data:JSON.stringify({email:t,json:"",PartitionKey:"ProjectArena"}),dataType:"json",complete:function(t){switch(t.status){case 200:alertEmailSuccess();break;case 202:alertEmailSuccess();break;case 500:alertEmailMalformed();break;default:alertNetworkProblem()}$("#mailForm").data("working",!1)}})}function validateEmail(t){var e=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return e.test(t)}function bindYtBtn(){var t=$(".overlay"),e=$(".inner",t);$(".play-btn").on("click",function(){t.hasClass("open")||(t.addClass("open"),0==$("iframe",e).length?(e.html('<div id="player"></div>'),bindVidToCurrent(t,"player",$(this).attr("data-yt"))):t.data("player").playVideo()),bindOverlayClose()})}function bindVidToCurrent(t,e,a){t.data("player",new YT.Player(e,{videoId:a,events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange},playerVars:{rel:0}}))}function onPlayerReady(t){t.target.playVideo()}function onPlayerStateChange(t){2!=t.data&&0!=t.data||2==$(".closeBtn").data("playerPause")||$(".closeBtn").data("playerPause",1).click()}JobsPageSetup(),$(document).ready(function(){$("#btn-nav-expand").on("click",function(){$(".collapse").addClass("mobile-active"),$(".collapse").removeClass("mobile-inactive"),$(".collapse").attr("aria-expanded",!0)}),$("#btn-nav-collapse").on("click",function(){console.log("collapse"),$(".collapse").addClass("mobile-inactive"),$(".collapse").removeClass("mobile-active"),$(".collapse").attr("aria-expanded",!1)})}),$(document).ready(function(){console.log("Document ready."),(new WOW).init(),InjectMagnificPopup(),InjectHeroScripts(),InjectHeaderCaptionScripts(),console.log("All Done!")}),$(document).ready(function(){$("#btn-nav-expand").on("click",function(){$(".collapse").addClass("mobile-active"),$(".collapse").removeClass("mobile-inactive"),$(".collapse").attr("aria-expanded",!0)}),$("#btn-nav-collapse").on("click",function(){console.log("collapse"),$(".collapse").addClass("mobile-inactive"),$(".collapse").removeClass("mobile-active"),$(".collapse").attr("aria-expanded",!1)})});var lastScrollTop=0,isScrolling=!1,gAlphaBase=0;$(document).ready(function(){$(".signup .input-lg").on("focusin",function(){$(".signup .border-bottom").addClass("on"),$(this).data("placeholder",$(this).attr("placeholder")),$(this).attr("placeholder",""),$(".signup").removeClass("error")}),$(".signup .input-lg").on("focusout",function(){0==$(this).val().length&&$(".signup .border-bottom").removeClass("on"),$(this).attr("placeholder",$(this).data("placeholder"))}),bindEmailSubmit()});